import{u as w,R as g,j as e,U as d}from"./index-CTNc0h0S.js";import{u as y}from"./useQuery-DDZH6T-k.js";import{E as j,a as c}from"./EventModal-jOt6idhT.js";import{u as v}from"./use-dialog.hook-DhqX7OMF.js";import{P as C}from"./PageHeader-Ct09w8tj.js";import{B as R}from"./button-hEMNqgW3.js";import{R as D}from"./PlusCircleOutlined-D7alUKl6.js";import{R as f}from"./EyeOutlined-DzsZdUem.js";import{R as b}from"./EditOutlined-DBwUVZax.js";import{R as E}from"./DeleteFilled-B7H7qXXk.js";import"./auth.service-Bh8YR8GJ.js";import"./index.esm-vrORIAiX.js";import"./index-BGGl8dva.js";import"./context-l6_uxjmp.js";const H=()=>{const a=w.getState().GET_AUTH_DATA().user.user_role.name,{data:l,refetch:s}=y({queryKey:["data-events-list"],queryFn:async()=>await c.geteventsList()}),[t,i]=g.useState({show:!1,selectedData:void 0,formType:void 0}),{showConfirm:p,closeConfirm:n,DialogComponent:u}=v(),x=o=>{r({show:!0,selectedData:o,formType:"update"})},h=o=>{p({open:!0,title:"Confirm Deletion",description:"Are you sure you want to delete this record?",type:"danger",onConfirm:async()=>{await c.deleteEvent(o),s(),n()},onCancel:()=>{n()}})},r=o=>{i(o)},m=o=>{r({show:!0,selectedData:o,formType:"view"})};return e.jsxs(e.Fragment,{children:[u,e.jsx(C,{title:a==="admin"?"Manage Event":"Events"}),e.jsx(j,{show:t.show,formType:t.formType,data:t.selectedData,disableDC:t.disableDC,refetch:s,handleClose:()=>i({show:!1,selectedData:void 0})}),e.jsxs("div",{className:"flex flex-row max-md:flex-col justify-end gap-3 w-full mb-4",children:[a==="superadmin"&&e.jsx(R,{type:"primary",className:"bg-orange-500",icon:e.jsx(D,{}),onClick:()=>r({show:!0,formType:"add"}),children:"Add Event"}),e.jsx("button",{className:"h-[35px] max-md:!w-full px-3 rounded bg-gray-200 border border-gray-300 text-gray-800 text-sm",onClick:()=>s(),children:"Refresh list"})]}),e.jsx("div",{className:"over-flow-auto h-[80vh] md:overflow-auto sm:overflow-auto",children:e.jsx("div",{className:"flex flex-wrap xl:gap-9 md:gap-4 justify-center gap-3 over-flow-auto  md:overflow-auto sm:overflow-auto",children:l&&l.map(o=>e.jsx(d,{style:{width:300},cover:e.jsx("img",{alt:"example",src:o.banner_img,className:"h-40 object-cover"}),...a==="superadmin"&&{actions:[e.jsx(f,{onClick:()=>m(o)}),e.jsx(b,{onClick:()=>x(o)}),e.jsx(E,{onClick:()=>h(o.id)})]},...a==="teacher"||a==="student"?{actions:[e.jsx(f,{onClick:()=>m(o)})]}:null,children:e.jsx(d.Meta,{title:o.title,description:o.message})},o.id))})})]})};export{H as default};
