import{u as w,R as g,j as e,C as d}from"./index-Cl4PPxfU.js";import{u as y}from"./context-DqoZ8Jyp.js";import{E as j,a as c}from"./EventModal-SBK1gpOn.js";import{u as v}from"./use-dialog.hook-CPM_AUKI.js";import{P as C}from"./PageHeader-DWdsMHj9.js";import{B as R}from"./button-nsU_U7Eb.js";import{R as D,a as b,b as T}from"./PlusCircleOutlined-C4_o0vQR.js";import{R as f}from"./EyeOutlined-CbkaX_5j.js";import"./auth.service-T2yPIQyd.js";import"./index.esm-vQTMqSCn.js";import"./index-DTVfLSuP.js";const q=()=>{const a=w.getState().GET_AUTH_DATA().user.user_role.name,{data:l,refetch:t}=y({queryKey:["data-events-list"],queryFn:async()=>await c.geteventsList()}),[s,n]=g.useState({show:!1,selectedData:void 0,formType:void 0}),{showConfirm:u,closeConfirm:i,DialogComponent:p}=v(),x=o=>{r({show:!0,selectedData:o,formType:"update"})},h=o=>{u({open:!0,title:"Confirm Deletion",description:"Are you sure you want to delete this record?",type:"danger",onConfirm:async()=>{await c.deleteEvent(o),t(),i()},onCancel:()=>{i()}})},r=o=>{n(o)},m=o=>{r({show:!0,selectedData:o,formType:"view"})};return e.jsxs(e.Fragment,{children:[p,e.jsx(C,{title:"Manage Event"}),e.jsx(j,{show:s.show,formType:s.formType,data:s.selectedData,refetch:t,handleClose:()=>n({show:!1,selectedData:void 0})}),e.jsxs("div",{className:"flex flex-row max-md:flex-col justify-end gap-3 w-full mb-4",children:[a==="superadmin"&&e.jsx(R,{type:"primary",className:"bg-orange-500",icon:e.jsx(D,{}),onClick:()=>r({show:!0,formType:"add"}),children:"Add Announcement"}),e.jsx("button",{className:"h-[35px] max-md:!w-full px-3 rounded bg-gray-200 border border-gray-300 text-gray-800 text-sm",onClick:()=>t(),children:"Refresh list"})]}),e.jsx("div",{className:"over-flow-auto h-[80vh] md:overflow-auto sm:overflow-auto",children:e.jsx("div",{className:"flex flex-wrap xl:gap-9 md:gap-4 justify-center gap-3 over-flow-auto  md:overflow-auto sm:overflow-auto",children:l&&l.map(o=>e.jsx(d,{style:{width:300},cover:e.jsx("img",{alt:"example",src:o.banner_img,className:"h-40 object-cover"}),...a==="superadmin"&&{actions:[e.jsx(f,{onClick:()=>m(o)}),e.jsx(b,{onClick:()=>x(o)}),e.jsx(T,{onClick:()=>h(o.id)})]},...a==="teacher"||a==="student"?{actions:[e.jsx(f,{onClick:()=>m(o)})]}:null,children:e.jsx(d.Meta,{title:o.title,description:o.message})},o.id))})})]})};export{q as default};
