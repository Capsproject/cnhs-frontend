import{B as s,R as i,j as t}from"./index-CvrchpOj.js";import{i as c}from"./auth.service-DBPzpycV.js";import{u as N}from"./index.esm-C1OOr8rf.js";import{M as k}from"./index-B1itfb1n.js";const p={createEvent:async function(e){return await c.post("admin/events",e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>(s.success("Announcement successfully created"),a.data.data)).catch(a=>{a.response.status===500?s.error("Failed to create announcement"):s.error(a.response.data.message)})},geteventsList:async function(){return await c.get("/admin/events").then(e=>e.data.data).catch(e=>{e.response.status===500?s.error("Failed to fetch event"):s.error(e.response.data.message)})},updateEvent:async function(e){return await c.patch("admin/events",e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>(s.success("Announcement successfully updated"),a.data.data)).catch(a=>{s.error("Failed to update announcement"),console.error(a)})},deleteEvent:async function(e){return await c.delete(`admin/events/${e}`).then(a=>(s.success("Event successfully deleted"),a.data.data)).catch(a=>{s.error("Failed to delete event"),console.error(a)})}},C=e=>{var y,v;const[a,m]=i.useState(!1),{handleSubmit:j,register:d,reset:u,setValue:x,formState:{errors:r}}=N(),f=()=>{u(),o(null),e.handleClose()},[g,o]=i.useState(null),[w,h]=i.useState(null),b=j(async l=>{m(!0);const n=new FormData;n.append("title",l.title),n.append("message",l.message),n.append("image",w),n.append("event_date",l.event_date),n.append("event_time",l.event_time),e.formType==="add"?(await p.createEvent(n),u(),e.refetch(),o(null),h(null)):(await p.updateEvent(n),u(),o(null),h(null),e.handleClose()),m(!1),e.handleClose()});return i.useEffect(()=>{if(console.log(e.formType),e.data){for(const[l,n]of Object.entries(e.data))x(l,n);o(e.data.banner_img)}},[e.formType,e.data,x]),t.jsx(k,{loading:a,title:e.formType==="add"?"Create Event":e.formType==="view"?"Event Detail":"Update Event",onCancel:f,onClose:f,open:e.show,...e.formType!=="view"?{okText:"Submit",onOk:b}:{footer:null},children:t.jsxs("form",{className:"flex flex-col gap-2",onSubmit:b,children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("input",{className:r.title?"border border-red-400":"appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",placeholder:"Event Title",...d("title",{required:!0}),type:"text",required:!0,...e.formType==="view"?{disabled:!0}:{}}),r.title?t.jsx("small",{className:"text-xs text-red-400",children:"Title is required"}):null]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("input",{...e.formType==="view"?{disabled:!0}:{},className:r.message?"border border-red-400":"appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",placeholder:"Event Description",...d("message",{required:!0}),type:"text",required:!0}),r.title?t.jsx("small",{className:"text-xs text-red-400",children:"Description is required"}):null]}),t.jsx("div",{className:"flex items-center w-full gap-5 justify-between flex-wrap",children:t.jsxs("div",{className:"flex flex-row gap-2",children:[t.jsx("input",{...e.formType==="view"?{disabled:!0}:{},className:r.message?"border border-red-400":"appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",placeholder:"Event Date",...d("event_date",{required:!0}),type:"date",required:!0,value:(y=e.data)==null?void 0:y.event_date}),r.event_date?t.jsx("small",{className:"text-xs text-red-400",children:"Date is required"}):null,t.jsx("input",{...e.formType==="view"?{disabled:!0}:{},className:r.message?"border border-red-400":"appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",placeholder:"Event Time",...d("event_time",{required:!0}),type:"time",value:(v=e.data)==null?void 0:v.event_time,required:!0}),r.event_time?t.jsx("small",{className:"text-xs text-red-400",children:"Time is required"}):null]})}),t.jsx("h1",{children:"Upload File"}),t.jsxs("div",{className:"flex items-center justify-center w-full",children:[t.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",children:[g?t.jsx("img",{src:g,alt:"Selected Image",className:"w-full h-full object-cover"}):t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[t.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:t.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),t.jsxs("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SVG, PNG, JPG or GIF (MAX. 800x400px)"})]})}),"c"]}),r.image?t.jsx("small",{className:"text-xs text-red-400",children:"Image is required"}):null]})]})})};export{C as E,p as a};
